<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>PolKitMateContext</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.74.0">
<link rel="home" href="index.html" title="PolicyKit-mate Library Reference Manual">
<link rel="up" href="ref-core.html" title="API Reference">
<link rel="prev" href="ref-core.html" title="API Reference">
<link rel="next" href="PolKitMateAction.html" title="PolKitMateAction">
<meta name="generator" content="GTK-Doc V1.10 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="reference" href="ref-core.html" title="API Reference">
<link rel="reference" href="ref-auth-daemon.html" title="Authentication Agent">
<link rel="appendix" href="license.html" title="Appendix A. License">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="ref-core.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ref-core.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">PolicyKit-mate Library Reference Manual</th>
<td><a accesskey="n" href="PolKitMateAction.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#PolKitMateContext.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="#PolKitMateContext.description" class="shortcut">Description</a>
                   | 
                  <a href="#PolKitMateContext.object-hierarchy" class="shortcut">Object Hierarchy</a>
                   | 
                  <a href="#PolKitMateContext.signals" class="shortcut">Signals</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="PolKitMateContext"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="PolKitMateContext.top_of_page"></a>PolKitMateContext</span></h2>
<p>PolKitMateContext — Convenience functions for using PolicyKit from GTK+ and MATE applications.</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="PolKitMateContext.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">
#define             <a class="link" href="PolKitMateContext.html#POLKIT-MATE-CONTEXT-ERROR:CAPS" title="POLKIT_MATE_CONTEXT_ERROR">POLKIT_MATE_CONTEXT_ERROR</a>
enum                <a class="link" href="PolKitMateContext.html#PolKitMateContextError" title="enum PolKitMateContextError">PolKitMateContextError</a>;
                    <a class="link" href="PolKitMateContext.html#PolKitMateContextPrivate" title="PolKitMateContextPrivate">PolKitMateContextPrivate</a>;
                    <a class="link" href="PolKitMateContext.html#PolKitMateContext-struct" title="PolKitMateContext">PolKitMateContext</a>;
<a class="link" href="PolKitMateContext.html" title="PolKitMateContext">PolKitMateContext</a>* <a class="link" href="PolKitMateContext.html#polkit-mate-context-get" title="polkit_mate_context_get ()">polkit_mate_context_get</a>            (<a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
>GError</a> **error);
<a
href="/usr/share/gtk-doc/html/glib/glib-Quarks.html#GQuark"
>GQuark</a>              <a class="link" href="PolKitMateContext.html#polkit-mate-context-error-quark" title="polkit_mate_context_error_quark ()">polkit_mate_context_error_quark</a>    (void);
</pre>
</div>
<div class="refsect1" lang="en">
<a name="PolKitMateContext.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="synopsis">
  <a
href="/usr/share/gtk-doc/html/gobject/gobject-The-Base-Object-Type.html#GObject"
>GObject</a>
   +----PolKitMateContext
</pre>
</div>
<div class="refsect1" lang="en">
<a name="PolKitMateContext.signals"></a><h2>Signals</h2>
<pre class="synopsis">
  "<a class="link" href="PolKitMateContext.html#PolKitMateContext-config-changed" title='The "config-changed" signal'>config-changed</a>"                                 : Run Last
  "<a class="link" href="PolKitMateContext.html#PolKitMateContext-console-kit-db-changed" title='The "console-kit-db-changed" signal'>console-kit-db-changed</a>"                         : Run Last
</pre>
</div>
<div class="refsect1" lang="en">
<a name="PolKitMateContext.description"></a><h2>Description</h2>
<p>
This class provides convenience functions for using PolicyKit from
GTK+ and MATE applications including setting up main loop
integration and system bus connections. Rather than using
callbacks, GObject signals are provided when external factors
change (e.g. the PolicyKit.conf configuration file changes or
ConsoleKit reports activity changes).
</p>
<p>
Actual usage of PolicyKit is still through the main PolicyKit API
through the public pk_context and pk_tracker variables.
</p>
<p>
This class is implemented as a singleton meaning that several
callers will share the underlying <a
href="/usr/share/gtk-doc/html/polkit/polkit-polkit-context.html#PolKitContext"
><span class="type">PolKitContext</span></a> and <a
href="/usr/share/gtk-doc/html/polkit-1/polkit-1-polkit-tracker.html#PolKitTracker"
><span class="type">PolKitTracker</span></a>
objects. Do not use any of the life cycle methods of these objects;
only use them to gather information.</p>
<p>

</p>
</div>
<div class="refsect1" lang="en">
<a name="PolKitMateContext.details"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="POLKIT-MATE-CONTEXT-ERROR:CAPS"></a><h3>POLKIT_MATE_CONTEXT_ERROR</h3>
<pre class="programlisting">#define POLKIT_MATE_CONTEXT_ERROR polkit_mate_context_error_quark ()
</pre>
<p>
Error domain for using the MATE PolicyKit context. Errors in this
domain will be from the <a class="link" href="PolKitMateContext.html#PolKitMateContextError" title="enum PolKitMateContextError"><span class="type">PolKitMateContextError</span></a> enumeration. See
<a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
><span class="type">GError</span></a> for information on error domains.</p>
<p>

</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="PolKitMateContextError"></a><h3>enum PolKitMateContextError</h3>
<pre class="programlisting">typedef enum
{
        POLKIT_MATE_CONTEXT_ERROR_FAILED
} PolKitMateContextError;
</pre>
<p>
Error codes describing how <a class="link" href="PolKitMateContext.html" title="PolKitMateContext"><span class="type">PolKitMateContext</span></a> can fail.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><a name="POLKIT-MATE-CONTEXT-ERROR-FAILED:CAPS"></a><span class="term"><code class="literal">POLKIT_MATE_CONTEXT_ERROR_FAILED</code></span></p></td>
<td> General error
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="PolKitMateContextPrivate"></a><h3>PolKitMateContextPrivate</h3>
<pre class="programlisting">typedef struct _PolKitMateContextPrivate PolKitMateContextPrivate;</pre>
<p>

</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="PolKitMateContext-struct"></a><h3>PolKitMateContext</h3>
<pre class="programlisting">typedef struct {
        PolKitContext *pk_context;
        PolKitTracker *pk_tracker;
} PolKitMateContext;
</pre>
<p>
Provide access to <a
href="/usr/share/gtk-doc/html/polkit/polkit-polkit-context.html#PolKitContext"
><span class="type">PolKitContext</span></a> and <a
href="/usr/share/gtk-doc/html/polkit-1/polkit-1-polkit-tracker.html#PolKitTracker"
><span class="type">PolKitTracker</span></a> instances
shared among many callers.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/polkit/polkit-polkit-context.html#PolKitContext"
>PolKitContext</a> *<em class="structfield"><code>pk_context</code></em>;</span></p></td>
<td> for interfacing with PolicyKit; e.g. typically <a
href="/usr/share/gtk-doc/html/polkit/polkit-polkit-context.html#polkit-context-can-caller-do-action"
><code class="function">polkit_context_can_caller_do_action()</code></a>
</td>
</tr>
<tr>
<td><p><span class="term"><a
href="/usr/share/gtk-doc/html/polkit-1/polkit-1-polkit-tracker.html#PolKitTracker"
>PolKitTracker</a> *<em class="structfield"><code>pk_tracker</code></em>;</span></p></td>
<td> this is used for effieciently obtaining <a
href="/usr/share/gtk-doc/html/polkit-1/polkit-1-polkit-caller.html#PolKitCaller"
><span class="type">PolKitCaller</span></a> objects
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="polkit-mate-context-get"></a><h3>polkit_mate_context_get ()</h3>
<pre class="programlisting"><a class="link" href="PolKitMateContext.html" title="PolKitMateContext">PolKitMateContext</a>* polkit_mate_context_get            (<a
href="/usr/share/gtk-doc/html/glib/glib-Error-Reporting.html#GError"
>GError</a> **error);</pre>
<p>
Returns a <a class="link" href="PolKitMateContext.html" title="PolKitMateContext"><span class="type">PolKitMateContext</span></a> object. The context is a global
singleton that may be shared with other callers of this function.
</p>
<p>
This operation can fail if the system message bus is not available.
</p>
<p>
When done with using this object, call <a
href="/usr/share/gtk-doc/html/gobject/gobject-The-Base-Object-Type.html#g-object-unref"
><code class="function">g_object_unref()</code></a>. This is
such that resources can be freed when all callers have unreffed it.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td> return location for error
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td> a new <a class="link" href="PolKitMateContext.html" title="PolKitMateContext"><span class="type">PolKitMateContext</span></a> or NULL if error is set
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="polkit-mate-context-error-quark"></a><h3>polkit_mate_context_error_quark ()</h3>
<pre class="programlisting"><a
href="/usr/share/gtk-doc/html/glib/glib-Quarks.html#GQuark"
>GQuark</a>              polkit_mate_context_error_quark    (void);</pre>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>


</td>
</tr></tbody>
</table></div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="PolKitMateContext.signal-details"></a><h2>Signal Details</h2>
<div class="refsect2" lang="en">
<a name="PolKitMateContext-config-changed"></a><h3>The <code class="literal">"config-changed"</code> signal</h3>
<pre class="programlisting">void                user_function                      (<a class="link" href="PolKitMateContext.html" title="PolKitMateContext">PolKitMateContext</a> *context,
                                                        <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>            user_data)      : Run Last</pre>
<p>
The ::config-changed signal is emitted when PolicyKit
configuration (e.g. /etc/PolicyKit/PolicyKit.conf or
.policy files) changes content.
</p>
<p>
As this is one contributing factor to what answer PolicyKit
will return, the caller should act on this signal and query
PolicyKit for any actions it cares about.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> the object
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="PolKitMateContext-console-kit-db-changed"></a><h3>The <code class="literal">"console-kit-db-changed"</code> signal</h3>
<pre class="programlisting">void                user_function                      (<a class="link" href="PolKitMateContext.html" title="PolKitMateContext">PolKitMateContext</a> *context,
                                                        <a
href="/usr/share/gtk-doc/html/glib/glib-Basic-Types.html#gpointer"
>gpointer</a>            user_data)      : Run Last</pre>
<p>
The ::console-kit-db-changed signal is emitted when
ConsoleKit configuration changes; e.g. when a session
becomes active or inactive.
</p>
<p>
As this is one contributing factor to what answer PolicyKit
will return, the caller should act on this signal and query
PolicyKit for any actions it cares about.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>context</code></em> :</span></p></td>
<td> the object
</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>user_data</code></em> :</span></p></td>
<td>user data set when the signal handler was connected.</td>
</tr>
</tbody>
</table></div>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.10</div>
</body>
</html>
